# Juggernaut v1.0 Plan

> **Recovered from conversation history on 2026-02-05**
> Original plan was accidentally deleted during git history cleanup.

## Overview

**Juggernaut** is a modular Mac desktop application for managing WordPress content. It started as "PLEXKITS API Pusher" (a Next.js web app) and is being transformed into a generic, distributable Electron app with a plugin system.

### Core Value Proposition

- Sync WordPress posts/resources to local SQLite for offline editing
- Bulk edit content with a powerful table interface
- Push changes back to WordPress with conflict detection
- AI-powered content generation via prompt templates
- Plugin system to support different WordPress plugins (MetaBox, ACF, SEOPress, Yoast, etc.)

---

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       JUGGERNAUT                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PLUGINS (extend WordPress plugin support)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ MetaBox  â”‚ â”‚ SEOPress â”‚ â”‚   ACF    â”‚ â”‚  Yoast   â”‚       â”‚
â”‚  â”‚ Plugin   â”‚ â”‚ Plugin   â”‚ â”‚ Plugin   â”‚ â”‚ Plugin   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  CORE (generic WordPress management)                        â”‚
â”‚  â€¢ Posts, Pages, Custom Post Types                          â”‚
â”‚  â€¢ Taxonomies (categories, tags, custom)                    â”‚
â”‚  â€¢ Basic fields (title, content, excerpt, featured image)   â”‚
â”‚  â€¢ Sync/Push engine, SQLite caching                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SITE PROFILES (configuration)                              â”‚
â”‚  â€¢ Site URLs, Post types, Enabled plugins                   â”‚
â”‚  â€¢ Field mappings, UI customizations                        â”‚
â”‚  â€¢ Import/Export for sharing                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Plugin Ecosystem (Tiered)

| Tier | Badge | Description | Distribution |
|------|-------|-------------|--------------|
| **BUNDLED** | ğŸŸ¢ | Ships with app, core WP support | Always included |
| **OFFICIAL** | ğŸ”µ | Free, we maintain (MetaBox, SEOPress, ACF, Yoast, WooCommerce) | Bundled, disabled by default |
| **COMMUNITY** | ğŸŸ¡ | Free, PR-submitted, we review | Plugin browser |
| **PREMIUM** | ğŸŸ£ | Paid, 20% revenue share | Marketplace (future) |

### Plugin Size Estimates

| Plugin | Estimated Size |
|--------|----------------|
| MetaBox | ~80-120 KB |
| SEOPress | ~40-60 KB |
| ACF | ~80-120 KB |
| Yoast | ~40-60 KB |
| WooCommerce | ~150-200 KB |
| **Total (all official)** | **~400-600 KB** |

For comparison: Electron runtime is ~150 MB. Plugins are negligible (<1% of app size).

**Decision**: Bundle all official plugins, disabled by default. Enable via Settings or auto-enable via profile import.

---

## Security

### Credential Storage

| Storage Option | Risk Level | Notes |
|----------------|------------|-------|
| `.env` file in app bundle | âš ï¸ Medium | Anyone with Mac access can read |
| **macOS Keychain** | âœ… Low | Encrypted, requires user password |
| Hardcoded in app | ğŸ”´ High | Never do this |

**Decision**: Use Electron's `safeStorage` API (uses macOS Keychain under the hood).

### First-Launch Flow

1. User opens Juggernaut for the first time
2. Prompted to enter WordPress URL, username, and app password
3. Credentials encrypted and stored in Keychain
4. Never stored in plain text

### Code Signing

- Without Apple Developer certificate ($99/year): Users see "unidentified developer" warning
- Can bypass with right-click â†’ Open
- For personal/family use, this is acceptable

---

## Distribution

### Electron Desktop App

- **Bundled with**: Node.js, Chromium, Next.js standalone build
- **App size**: ~150-200 MB
- **Platforms**: macOS (primary), Windows/Linux (future)

### Auto-Updates via GitHub Releases

```
1. You build the app â†’ Creates "Juggernaut-1.0.0.dmg"
2. Upload to GitHub Release â†’ Tagged as v1.0.0
3. Wife opens app â†’ App checks GitHub API for newer version
4. You release v1.1.0 â†’ Her app detects, downloads, installs automatically
```

**Wife doesn't need GitHub account** - the app handles everything.

### Repository Strategy

**Decision**: Public repo

- Code isn't sensitive (credentials in Keychain, not repo)
- Simplest auto-update path
- Open-source personal tools is common

---

## Site Profiles

JSON configuration files that define a WordPress site setup:

```json
{
  "version": "1.0",
  "profile_name": "PLEXKITS Resources",
  "sites": [
    { "id": "local", "name": "Local Dev", "url": "http://plexkits-v4.local" },
    { "id": "staging", "name": "Staging", "url": "https://staging.plexkits.com" },
    { "id": "production", "name": "Production", "url": "https://plexkits.com" }
  ],
  "post_types": [
    {
      "slug": "resource",
      "name": "Resource",
      "rest_base": "resource",
      "supports": ["title", "editor", "thumbnail"]
    }
  ],
  "taxonomies": [
    { "slug": "resource-type", "name": "Resource Type", "rest_base": "resource-type" },
    { "slug": "topic", "name": "Topic", "rest_base": "topic" }
  ],
  "required_plugins": ["metabox", "seopress"],
  "ui": {
    "tabs": ["basic", "seo", "content", "features", "classification", "downloads", "ai"],
    "branding": {
      "name": "PLEXKITS Manager",
      "color": "#your-brand-color"
    }
  }
}
```

### Your Wife's Experience

1. Opens Juggernaut
2. Clicks "Import Profile"
3. Selects `plexkits.json` you sent her
4. App auto-enables required plugins (MetaBox, SEOPress)
5. Enters WordPress credentials (stored in Keychain)
6. Everything configured - ready to use

---

## Implementation Roadmap

### Phase 1: Plugin System Foundation (0.9.x)
- [ ] Define plugin interface (TypeScript)
- [ ] Create hook system for extending UI/API
- [ ] Plugin manifest format (plugin.json)
- [ ] Plugin loader in app startup

### Phase 2: Extract Existing Plugins (1.0.0-alpha)
- [ ] Extract MetaBox support into plugin
- [ ] Extract SEOPress support into plugin
- [ ] Move hardcoded PLEXKITS config to profile

### Phase 3: Profile System (1.0.0-beta)
- [ ] Profile import/export
- [ ] Auto-enable plugins from profile
- [ ] Site switcher in UI

### Phase 4: Generic Core (1.0.0-rc)
- [ ] Remove all PLEXKITS hardcoding
- [ ] Support any custom post type
- [ ] Dynamic taxonomy support
- [ ] Generic field rendering

### Phase 5: Electron Packaging (1.0.0)
- [x] Electron wrapper around Next.js
- [x] macOS Keychain credential storage
- [x] Auto-updates via GitHub Releases
- [x] Window dragging (hiddenInset title bar)
- [ ] Code signing (optional, $99/year)
- [ ] First-launch setup wizard

### Phase 6: Plugin Ecosystem (1.1.0+)
- [ ] Plugin browser UI
- [ ] Plugin registry API
- [ ] Community plugin submissions
- [ ] Premium plugin marketplace

---

## Current Status (v0.9.8)

### Completed
- [x] Electron app structure
- [x] Next.js standalone packaging
- [x] Secure credential storage (macOS Keychain via safeStorage)
- [x] Window dragging support
- [x] Auto-update infrastructure (electron-updater)
- [x] Plugin loader (basic)
- [x] MetaBox plugin (bundled)
- [x] SEOPress plugin (bundled)
- [x] Site target switcher
- [x] Profile system (basic)

### In Progress
- [ ] Testing credential flow end-to-end
- [ ] Local build testing workflow

### Known Issues
- Previous GitHub releases (v0.9.0 - v0.9.7) had various packaging issues
- Need to test locally before pushing releases
- Use `--prerelease` flag for future test releases

---

## Version History

| Version | Changes |
|---------|---------|
| 0.9.0 | Initial Electron setup |
| 0.9.1 - 0.9.7 | Various packaging fixes (all had issues) |
| 0.9.8 | Secure Keychain credential storage |
| 1.0.0 | Target: First stable release |

---

## Commands Reference

```bash
# Development
npm run dev              # Start Next.js dev server
npm run build            # Build Next.js for production
npm run build:electron   # Compile Electron TypeScript

# Testing locally (without packaging)
npx electron .           # Run Electron with built Next.js

# Packaging
npm run electron:build:mac  # Build .dmg for macOS

# Release (when ready)
npm run electron:publish    # Build and upload to GitHub Releases
```

---

## Notes

- Always test builds locally before releasing
- Use `--prerelease` flag for test releases
- Credentials are stored in: `~/Library/Application Support/Juggernaut/credentials.enc`
- Database is stored in: `./data/` (not bundled with app)
